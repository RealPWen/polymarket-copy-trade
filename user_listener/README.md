# 📊 Polymarket User Listener & Analysis Tools

此模块是专门用于 **Polymarket 交易员追踪与深度分析** 的核心工具包。它集成了实时数据抓取、盈亏计算、可视化报表以及实时监控等功能。

---

## 🌟 主要功能

### 1. 专业分析仪表盘 (Web Dashboard)
- **深度分析**：计算并展示交易员的累计收益曲线 (PnL Curve)。
- **实时监控**：提供侧边栏实时流水监听，延迟极低。
- **动态联动**：当检测到新订单时，仪表盘会自动重绘收益曲线并刷新持仓数据。
- **智能提醒**：新订单推入时会有高亮动画效果及清爽的 **音频提示音**。
- **多维排行榜**：自动分析最大盈利/亏损市场，以及当前的实际持仓权重。

### 2. 终端监听器 (CLI Listener)
- 适合极致轻量化的后台监控。
- 在终端即时输出交易详情。
- 自动处理分页与心跳检测。

---

## 🚀 快速启动

在使用前，请确保你已安装必要的 Python 依赖：
```bash
pip install pandas requests flask plotly
```

### A. 启动网页监控面板 (推荐)
这是体验最完整的方式。

1. **启动服务**：
   ```bash
   python user_listener/app.py
   ```
2. **访问网页**：在浏览器打开 `http://127.0.0.1:5005`。
3. **输入地址**：输入你想追踪的 Polymarket 钱包地址，点击分析。
4. **开启实时监听**：在生成的报表中，**双击 (Double Click)** 右上角的 `Order History` 区域，侧边栏将滑出并开始实时监测。

### B. 启动终端监听模式
如果你只需要在命令行看数据流：

```bash
python user_listener/account_listener.py <钱包地址>
```

---

## 📂 结构说明

- `app.py`: Web 服务的入口，处理路由与数据分发。
- `trader_analyzer.py`: 核心计算引擎，采用加权平均成本法计算 PnL。
- `visualize_trader.py`: 可视化逻辑，负责生成 Dashboard 的 HTML/JS 结构。
- `account_listener.py`: CLI 版监听逻辑。
- `polymarket_data_fetcher.py`: 高可靠性的 Polymarket API 交互层。
- `templates/`: 存放 Web 界面所需的 HTML 模板。

---

## 🛠 故障排除
如果在启动时提示 `Address already in use (5005)`，请运行根目录下的清理脚本：
```bash
./kill_port.sh
```

---
*Generated by Antigravity AI @ 2026*
